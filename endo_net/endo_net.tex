\documentclass[12pt]{article}
\usepackage[affil-it]{authblk}
%
\usepackage{amsmath,amssymb,amsthm,ascmac}
\usepackage{float}
\usepackage[dvipdfmx]{graphicx}
\usepackage{subcaption}
\usepackage{here}
\usepackage{pifont}
\usepackage{comment}
\usepackage{tikz}
\usepackage{geometry}
\usepackage{pgfplots}
\usepackage{dsfont}
\usepackage{bm}
\usetikzlibrary{patterns}

\usepackage{mathptmx} % rm & math
\usepackage[scaled=0.90]{helvet} % ss
\usepackage{courier} % tt
\normalfont
\usepackage[T1]{fontenc}

\geometry{left=1.0in,right=1.0in,top=1.0in,bottom=1.0in}
%¥usepackage[top=25truemm,bottom=25truemm,left=10truemm,right=10truemm]{geometry}
\usepackage{setspace}
\setstretch{1.5} %行間の広さ指定

\theoremstyle{definition}
\newtheorem{theorem}{Theorem}
\newtheorem*{theorem*}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem*{lemma*}{Lemma}
\newtheorem{proposition}{Proposition}
\newtheorem*{proposition*}{Proposition}
\newtheorem{definition}{Definition}
\newtheorem*{definition*}{Definition}
\newtheorem{corollary}{Corollary}
\newtheorem*{corollary*}{Corollary}
\newtheorem{assumption}{Assumption}
\newtheorem*{assumption*}{Assumption}
\newtheorem{example}{Example}
\newtheorem*{example*}{Example}
\newtheorem*{remark}{Remark}
\newtheorem{algorithm}{Algorithm}
\newtheorem*{algorithm*}{Algorithm}

\newcommand{\bs}[1]{\boldsymbol{#1}}


\begin{document}

\title{Endogenous Network Formation with Peer-Effects}

\author{Yuya Furusawa}
\affil{U-Tokyo, GSE, 29-186036}

\date{\today}

\maketitle

\begin{abstract}
aaaa
\end{abstract}


\section{Introduction}

% Network with peer effects
Network structures and local interactions play an important role in detemining individual and aggregate behavior.
Individual behavior generates a positive or negative externalities and affects neighbors' behavior, which is referred to as peer effect.
Recently, many literatures in the economics theoretically and emprically point out this significance.
In these works, it is shown that peer effects are important in many kinds of network, for example, social network, criminal network, firm-to-firm networks where firms invest R\&D activities, networks for labor market participation, educational network, and so on.
In criminal network, when the neighbors are highly devoted to criminal activities such as drug abuses, the agent are more likely to concentrate on the drug usage due to the information or traffickinf from his neighbors.

% Importance of network formation
However, many existing literatures about the networks in economics ignore the mechanism of the network formation, and they cannot answer the question why such a network we have?
The 

% Summary of results
We develop the two stage dynamic game, where agents form links to other agents in the first stage and agents excert efforts in the second stage.
Second stage game is eccensially same with the model in Ballester, Calv\'{o}-Armengol, and Zenou(2006)~\cite{whowho}.
Agents simultaneously choose a nonnegative effort level and the agents' payoffs depend on not only their own effort but also neighbors' effort.
The agents' efforts generates the positive externalities, so called "peer effects", to the connected agents in the network.
We extend the model of Ballester, Calvo-Armengol, and Zenou(2006)~\cite{whowho} to the endogenous network by introducing first stage game, choosing neighbors.
In the first stage, agents simultaneously choose their neighbors from the neighbors in the potential network, which represents the maximual possible conncetion without any limitations.
When agents decide who to connect, they incur the link-specific costs, which is a key factor for determining the network.
The link formation costs (and benefits of efforts) make the heterogeneity across the agents, which leads to the various types of networks.
We consider the subgame perfect equilibrium where all agents take pure starategies in the both stages.

We establish that such an equilibrium always exists.
The existence of an equilibrium can be shown by the best response dynamics algorithm, which always halts in finite steps.
The algorithm starts from the potential network, the potentially largest network, and the agent who does not take best response is randomly choosen and takes best response, which changes the structure of the network.
We can also show the equilibrium derived by this algorithm is unique, but equilibrium itself may not be unique.
This uniqueness enables us to analyze a comparative statics in the link formation costs.
Reduction in the costs leads to larger network because agents are more likely to connect to other agents.
Realized network is discontinuous in the link formation costs, so changes in the costs leads to discontinuous changes in the network.
We give a example that tiny change in the link formation costs leads to drastic change of the network structure, phase transition.
We analyze a key player policy in this endogenous network as in the previous literatures.
Key player is the agent in the potential network who makes largest reduction of aggregate effort level once he removed from the potential network.
However, it is difficult to find key players from the link formation costs because its discontinuity.
We give a example that key player in the endogenous network and in the exogenous (key player defined in the previous literatures) might be different.

% Literature Review
This paper contributes to the growing literatures on the endogenous networks.
Endogeneity of the network is one of the hottest topics in the field of econimic networks and many researchers tackle this problem.
Oberfield(2018)~\cite{ober}, and Acemoglu and Azar(2019)~\cite{endo_net} argue the endogenous production networks.
In their model, the productivity of the firms is determined by the input or supplier, and the its customer, who use its output as input, and final consumers generates the firms' profit.
This productivity is the key factor for network formation, and, in equilibrium, input-output architecture endogenously emerge.
Farboodi(2014)~\cite{farboodi} Babus(2016)~\cite{babus} argue the endogenous formation of financial networks.
For other networks, Canen, Jackson, and Trebbi(2019)~\cite{canen} empirically analyze the formation of networks of politicians.

% Closely Related Literature
This paper is closely related to Kim, Patacchini, Picard, and Zenou(2017)~\cite{Urban} which considers the social relationship formation in the urban geographical space.
They consider the model where a contiuum of agents distributes over the line segment and decides the intensity of interactions to the agents who lives in the other point of the segment.
The agents' payoff and the positive externalities of the interactions are eccentially same with our model and Ballester, Calv\'{o}-Armengol, and Zenou(2006)~\cite{whowho} (and other literatures).
Although the number of agents is infinite, we can treat their model as the network formation model.\footnote{In empirical part, they discritize the agents and consider the adjacency matrix as our model.}
The key factor of network formation in their paper is the distribution of agents and the cost of interations which is measured by geographic distance.
There are two differences in this paper and ours.
First, in their model, the cost of interactions is only determined by the distance of two agents.
In many cases, interactions are affected by various kinds of obstacles, such as psychological barrier and financial cost.
In contrast, our model can incorporate any kinds of interaction costs, and it enables us to consider any kinds of economic situations in our framework.
Second, they consider the weighted relationships and agents decide the intensity of interaction to every other agents.
Due to this feature, we can remove the any kinds of discontinuity and compute the network structure and the weights of links analytically.
However, analytical solution always shows that equilibrium network is always complete network, that is every agent connects all other agents in the network.
Our model can explain the formation of any structure of the networks.

Hiller(2017)~\cite{hiller} is also related to our paper.
He develops the very similar model with ours: agents choose their neighbors and decide the level of efforts.
He considers the general payoff function which include the payoff function in our model.
But he considers the static game where all agents choose neighbors and effort levels simultaneously.
In addition, the costs of link formation is determined by the number of links.
This construction of the model lacks the uniqueness of the equilibrium, Nash equilibrium.
Our model can have a kind of uniqueness of the equilibrium by setting the game dynamic.

The rest of the paper is organized as follows.
Section 2 describes the model.
In section 3, we first give the definition of the equilibrium and present the result on its existence and uniqueness.
We also present the result on comparative statics in this section.
In section 4, we comment on the key player and Section 5 concludes.
All proofs used to show the reults in this paper are attached in the Appendix(Section 6).


\section{Model}

There are $n$ agents in the economy, and denote the set of agents $N = \{ 1, \cdots, n\}$.
We assume $n$ is finite and $n \ge 2$.

The game consists of two-stage game: {\it{choosing neighbors}} and {\it{choosing an effort level}}.
Initially, agents are connected in the potential network $g^p$.
We consider the network $g^p$ is connected, directed and unweighted.
The potential network $g^p$ is represented by adjacency matrix $\bm{G}^p = {(g_{ij}^p)}_{ij}$ where, for any $i \neq j$,
\[ g_{ij}^p =
	\begin{cases}
		1 \  (\text{if $i$ has a link to $j$ in $g^p $}) \\
		0 \  (\text{otherwise})
	\end{cases} \]
Note that $\bm{G}^p$ can be asymetric and $g_{ii}^p = 0$ for all $i$.
Denote the set of agent $i$'s neighbors in the potential network $N_i(g^p)$.
In the first stage, each agent $i$ simultaneously chooses the partners from the potential neighbors, $N_i(g^p)$, where $N_i(g^p) = \{ j \in N | g_{ij}^p = 1 \}$.
This strategy can be represented by its subset $\psi_i \subset N_i(g^p)$, and $\psi_i$ can be empty.
We assume that when forming a link, each agent incurs a cost $c_{ij} \ge 0$, and denote its matrix $\bm{C} = {(c_{ij})}_{ij}$.\footnote{We assume that $c_{ij} = 0$ for $ij$ such that $g_{ij}^p = 0$.}
The link formation cost represents, for example, geographic distance or psychological barrier.
Since $\psi_i$ depends on potential network $g^p$ and costs $\bm{C}$, to emphasize it, we denote $\psi_i(g^p, \bm{C})$.
We denote its profile $\bm{\psi}(g^p, \bm{C}) = \prod_{i=1}^n \psi_i(g^p, \bm{C})$.
After forming links, the network $g$ is realized.
$g$ is represented by the adjacency matrix $\bm{G} = {(g_{ij})}_{ij}$ such that, for any pair $(i,j)$,
\[ g_{ij} = 
	\begin{cases}
		1 \  (\text{if} \  j \in \psi_i(g^p, {\bm{C}}) ) \\
		0 \  (\text{otherwise})
	\end{cases} \]
We can see the realization of the network depends on agents' choosing strategy $\bm{\psi}(g^p, \bm{C})$.
To represent this dependency, we can write the realized network $g$ as $g(\bm{\psi}(g^p, \bm{C}))$.
From now on, we denote the network $g(\bm{\psi}(g^p, \bm{C}))$ as $g(\bm{\psi})$ and $\bm{\psi}(g^p, \bm{C})$ to avoid redundant representation unless $g^p$ and $\bm{C}$ are key variables.

In the second stage, each agent $i = 1, \cdots, n$ simultaneously excerts an effort $x_i \ge 0$, and gets a payoff which depends on the agents' efforts and realized network.
Denote $\bm{x} = (x_1, \cdots, x_n)$.
\[ u_i(\bm{x}, \bm{\psi}, \bm{C}, \phi) = v_i(\bm{x}, g(\bm{\psi}), \phi) - \sum_{j=1}^n g_{ij}(\bm{\psi}) c_{ij} \]
where
\begin{equation}
\label{function_v}
	v_i(\bm{x}, g(\bm{\psi}), \phi) = \alpha_i x_i - \frac{1}{2} x_i^2 + \phi \sum_{j=1}^n g_{ij}(\bm{\psi}) x_i x_j
\end{equation}
Here, we focus on bilinear payoff functions.
First term of (\ref{function_v}) represents the individual benefit of effort, and second term is the disutility of effort.
Third cross term represents the peer effect of the effort.
If the neighbor excerts high effort, agent $i$ receives large benefit with decay factor $\phi$.
Peer effect is derived by the externalities of the effort.
We assume $\alpha_i > 0$ for all $i$, and $\phi > 0$.
Denote $\bm{\alpha} = (\alpha_1, \cdots, \alpha_n)$.

Before go into an equilibrium analysis, we introduce a well-known network centrality measure which is useful for our analysis.
Consider the $n$-square adjacency matrix $\bm{G}$ of a network $g$ where $g_{ij} = 1$ if $i$ has a direct link to $j$ and $g_{ij} = 0$ otherwise.
We introduce a following definition from Katz(1953)~\cite{katz} and Bonacich(1987)~\cite{bonacich}.

\begin{definition}
Given a vector $\bm{u} \in \mathbb{R}_+^n$, and a small enough $\phi \ge 0$, the vector of Katz-Bonacich centralities of parameter $\phi$ in network $g$ is defined as:

\[ \bm{b}_{\bm{u}}(g, \phi) = {(\bm{I} - \phi \bm{G})}^{-1} \bm{u} = \sum_{p=0}^{\infty} \phi^p \bm{G}^p \bm{u} \]

\end{definition}

Katz-Bonacich centrality can be thought of a centrality measure which considers the discounted sum of the walks.
The $i$-th entry of the vector $\bm{b}_{\bm{u}}(g, \phi)$ is denoted by $b_{\bm{u}, i}(g, \phi)$.
We write the sum of Katz-Bonacich centrarities as $b_{\bm{u}}(g, \phi) = \sum_{i=1}^n b_{\bm{u}, i}(g, \phi)$


\section{Equilibrium and Characterization}


\subsection{Equilibrium definition and its existence}

In this paper, we consider the subgame perfect equilibrium where all agents take pure strtegies in every subgame.
The reason why we consider such a equilibrium is that pure strategies in choosing neighbors makes network deterministic.
If agents take mixed actions in the first stage, the realized network can be stochastic and we cannot directly compare the realized network.
We call the network emerged in the pure-strategy subgame perfect equilibrium as {\it{equilibrium network}}.

\begin{definition}
Given $g^p$ and $\bm{C}$, the network $g^*$ is equilibrium network if $g^* = g(\bm{\psi}^*)$ where $\bm{\psi}^*$ is the strategies in the pure-strategy subgame perfect equilibrium.
\end{definition}

We characterize the equilibrium network by a standard way: backward induction.
First, given realized network $g$, consider the second stage, choosing an effort level.
To characterize the equilibrium in this subgame, we require a new assumption.
Denote $\rho (\bm{G})$ as the spectral radius of the matrix $\bm{G}$.

\begin{assumption}
$\phi \rho(\bm{G}^p) < 1$
\end{assumption}

This assumption ensures that the spill-over effect is bounded in the potential network which is the possiblly largest network.
We show that, under this assumption, there exists a unique Nash equilibrium in the second stage for any realized network.

\begin{proposition}
Under Assumption 1, for any realized network $g$, the subgame has a unique Nash equilibrium $\bm{x}^*$, which is interior and given by
\[ \bm{x}^* = {(\bm{I} - \phi \bm{G})}^{-1} \bm{\alpha} \]
\end{proposition}

Ballester, Calvo-Armengol, and Zenou(2006, 2010) show that, given network $g$, there exists a unique interior Nash equilibrium when the spectral radius of the adjacency matrix of the network is small enough.
In addition, we find that optimal effort levels coincide with the Katz-Bonacich centrarity of parameter $\phi$ given realized network $g$.
In our model, the spectral radius of the adjacency matrix of realized network may not satisfy that condition.
Proposition 1 says that we can satisfy the condition under Assumption 1.
Note that Proposition 1 also provides the Nash equilibrium, which is a first step of backward induction.

Here $\bm{x}^*$ is the optimal effort in the realized network, and so we can find $x_i^*$s' are dependent of $\bm{\psi}$, so optimal effort levels can be written as $x_i^*(\bm{\psi})$.
From Proposition 1, we can calculate as follows:
\begin{equation}
	\label{opteff}
	v_i^*(\bm{x}^*(g(\bm{\psi})), g(\bm{\psi}), \phi) = \frac{1}{2} {[b_{\bm{\alpha}, i}(g(\bm{\psi}), \phi)]}^2 = \frac{1}{2} {x_i^*(g(\bm{\psi}))}^2
\end{equation}

In order to characterize the subgame perfect equilibrium, next we consider the agents' strategy to choose neighbors.
In light of Proposition 1, we only need to consider Nash equilibria given the efforts in the second stage Nash equilibrium.
Since the number of agents and strategies is finite, there exists Nash equilibrium, but as mentioned above, we will consider the pure staretegy equilibrium.
To show the existence of such a equilibrium, we consider the following algorithm.

\begin{algorithm}
\ 
\begin{description}
	\item[Step 0.]\mbox{}\\
		Let $g^{(0)}$ be the initial realized network where $g^{(0)} = g^p$, that is $\psi_i^{(0)} = N_i(g^p)$.
		Compute each players' optimal effort and payoffs.
		Denote the set of agents who do not take best response as $NB^{(0)}$:
		\begin{equation*}
		\begin{split}
			NB^{(0)} = \{i \in N &| \exists \tilde{\psi}_i \subset N_i(g^p) \ \text{s.t.} \ u_i(\bm{x}^*(g(\tilde{\psi}_1, \psi_{-i}^{(0)}), \tilde{\psi}_i, \psi_{-i}^{(0)}, \bm{C}, \phi) > u_i(\bm{x}^*(g(\bm{\psi}^{(0)})), \bm{\psi}^{(0)}, \bm{C}, \phi) \\
								 &\text{and} \ \tilde{\psi}_i \neq \psi_i^{(0)} \}
		\end{split}
		\end{equation*}
		Go into Step 1.
	\item[Step $k(\ge 1)$.]\mbox{}\\
		Check whether $NB^{(k-1)}$ is empty or not.

		If $NB^{(k-1)} = \emptyset$, define $g^* = g(\bm{\psi}^{(k-1)})$ and terminate the algorithm.

		Otherwise, choose a agent $i \in NB^{(k-1)}$ randomly.
		Agent $i$ takes best response, changing links, then new network is emerged.
		That is, $i$ changes her strategy from $\psi_i^{(k-1)}$ to $\psi_i^{(k)}$ such that $u_i(\bm{x}^*(g(\psi_i^{(k)}, \psi_{-i}^{(k-1)})), \psi_i^{(k)}, \psi_{-i}^{(k-1)}, \bm{C}, \phi) > u_i(\bm{x}^*(g(\bm{\psi}^{(k-1)})), \bm{\psi}^{(k-1)}, \bm{C}, \phi)$, and for any other agents $j (\neq i)$ remain their strategies, $\psi_j^{(k)} = \psi_j^{(k-1)}$.
		Then, new network $g(\bm{\psi}^{(k)})$ is realized.
		Compute each players' payoffs and define $NB^{(k)}$:
		\begin{equation*}
		\begin{split}
			NB^{(k)} = \{i \in N &| \exists \tilde{\psi}_i \subset N_i(g^p) \ \text{s.t.} \ u_i(\bm{x}^*(g(\tilde{\psi}_1, \psi_{-i}^{(k)}), \tilde{\psi}_i, \psi_{-i}^{(k)}, \bm{C}, \phi) > u_i(\bm{x}^*(g(\bm{\psi}^{(k)})), \bm{\psi}^{(k)}, \bm{C}, \phi) \\
								 &\text{and} \ \tilde{\psi}_i \neq \psi_i^{(k)} \}
		\end{split}
		\end{equation*}
		Proceed to Step $k+1$.
\end{description}
\end{algorithm}

Algorithm 1 is one of the {\it{best response dynamics}} algorithms, where agents take their best reponses in each steps.
You may notice that if the best reponse dynamics halts, it returns a pure strategy Nash equilibrium.\footnote{See Nisan, Noam, et al.~\cite{AGT}}
Thus, to show the existence of the equilibrium, we need to show this algorithm always terminates.
To do that, we need some lemmas.

\begin{lemma}
	Given the network $g$ and $\hat{g}$ such that
	\[  \begin{cases}
			\hat{g}_{ij} = 1, g_{ij} = 0 \\
			\hat{g}_{lm} = g_{lm} \ \text{for any} \ lm  \neq ij
		\end{cases} \]
	Also consider the $\bm{\hat{\psi}}$ and $\bm{\psi}$  which construct network $\tilde{g}$ and $g$ respectively. 
	Then,
	\[ \bm{x}^*(\hat{g}(\bm{\hat{\psi}})) \ge \bm{x}^*(g(\bm{\psi})) \]
	and
	\[ x_i^*(\hat{g}(\bm{\hat{\psi}})) > x_i^*(g(\bm{\psi})) \]
\end{lemma}

Lemma 1 states that function $v_i$ is a increasing function in $\psi_i$.
From (\ref{opteff}), we can have 
\[ v_i^*(x^*(\hat{g}(\bm{\hat{\psi}})), \hat{g}(\bm{\hat{\psi}}), \phi) > v_i^*(x^*(g(\bm{\psi})), g(\bm{\psi}), \phi)\]
and for any $j \neq i$,
\[ v_j^*(x^*(\hat{g}(\bm{\hat{\psi}})), \hat{g}(\bm{\hat{\psi}}), \phi) \ge v_j^*(x^*(g(\bm{\psi})), g(\bm{\psi}), \phi)\]
These imply that $v_i^*$ is increasing in $\psi$.

\begin{lemma}
	Consider the network $g$, $\hat{g}$, $h$, and $\hat{h}$ (its adjacency matrices are $\bm{G}$, $\bm{\hat{G}}$, $\bm{H}$, and $\bm{\hat{H}}$ respectively) such that
	\[  \begin{cases}
			\hat{g}_{ij} = 1, g_{ij} = 0 \\
			\hat{g}_{lm{}} = g_{lm} \ \text{for any} \ lm  \neq ij
		\end{cases}
		\ \text{and} \ 
		\begin{cases}
			\hat{h}_{ij} = 1, h_{ij} = 0 \\
			\hat{h}_{lm} = h_{lm} \ \text{for any} \ lm  \neq ij
		\end{cases} \]
	and $g$, $\hat{g}$, $h$, and $\hat{h}$ satisfy that $\bm{G} \ge \bm{H}$ and  $\bm{\hat{G}} \ge \bm{\hat{H}}$.
	Also consider the $\bm{\hat{\psi}}$, $\bm{\psi}$, $\bm{\hat{\varphi}}$, and $\bm{\varphi}$  which construct network $\tilde{g}$, $g$, $\hat{h}$, and $h$ respectively. 
	Then
	\[ v_i^*(\bm{x}^*(\hat{g}(\bm{\hat{\psi}})), \hat{g}(\bm{\hat{\psi}}), \phi) - v_i^*(\bm{x}^*(g(\bm{\psi})), g(\bm{\psi}), \phi) \ge v_i^*(\bm{x}^*(\hat{h}(\bm{\hat{\varphi}})), \hat{h}(\bm{\hat{\varphi}}), \phi) - v_i^*(\bm{h}^*(g(\bm{\varphi})), h(\bm{\varphi}), \phi)\]
\end{lemma}

Lemma 2 states shows the concavity of the function $v$ in the network.
If the network is more denser, the reduction of the utility without fixed cost by the link deletion becomes larger.
Using Algorithm 1 and these lemmas, we can show there exists a pure strategy subgame perfect equilibrium.

\begin{theorem}
Algorithm 1 terminates in finite steps, and converged network represents the equilibrium network
\end{theorem}

%supermodular games
The algorithm never fails to converge because the removed links will not be reformed in the later steps.
We note that the 1st stage game given 2nd stage Nash equilibrium is the supermodular game.
The set of strategies in 1st stage game is a complete lattice in $\mathbb{R}^{|N_i(g^p)|}$.


\subsection{Uniqueness of the equilibrium}

Previous subsection shows the existence of the equilibrium, and we argue the uniqueness of the equilibrium in this subsection.
Since the equilibrium in the second stage is unique from Proposition 1, we focus on the first stage strategies.
However, the equilibrium network is not necessarily unique.
The following example shows that equilibrium network is not unique.

\begin{example}
Consider the network with $n=2$, and the potential network $g^p$ such that,
\[ \bm{G}^p = \left[
	\begin{array}{cc}
		0 & 1 \\
		1 & 0
	\end{array} \right] \]
Assume $\bm{\alpha} = (1, 1)$ and $\phi$ satisfies Assumption 1.
Denote the realized network $g$ as
\[ \bm{G} = \left[
	\begin{array}{cc}
		0 & g_{12} \\
		g_{21} & 0
	\end{array} \right] \]
where $g_{12}, g_{21} \in \{0,1\}$.
By proposition 1, we can compute each player's equilibrium payoffs:
\[ (u_1^*, u_2^*) =
	\begin{cases}
		\left( \frac{1}{2}{\left( \frac{1}{1 - \phi} \right)}^2 - c_{12}, \frac{1}{2}{\left( \frac{1}{1 - \phi} \right)}^2 - c_{21} \right) & (g_{12} = 1, g_{21} = 1) \\
		\left( \frac{1}{2}{(1+\phi)}^2 - c_{12}, \frac{1}{2} \right) & (g_{12} = 1, g_{21} = 0) \\
		\left( \frac{1}{2}, \frac{1}{2}{(1+\phi)}^2 - c_{21} \right) & (g_{12} = 0, g_{21} = 1) \\
		\left( \frac{1}{2}, \frac{1}{2} \right) & (g_{12} = 0, g_{21} = 0)
	\end{cases} \]
From this calculation, if $c_{12}$ and $c_{21}$ satisfy
\[ \frac{1}{2}{(1+\phi)}^2 - \frac{1}{2} < c_{12} < \frac{1}{2}{\left( \frac{1}{1 - \phi} \right)}^2 - \frac{1}{2} \]
\[ \frac{1}{2}{(1+\phi)}^2 - \frac{1}{2} < c_{21} < \frac{1}{2}{\left( \frac{1}{1 - \phi} \right)}^2 - \frac{1}{2} \]
then $(g_{12}, g_{21}) = (1,1)$ and $(g_{12}, g_{21}) = (0,0)$ are both Nash equilibria.
Thus, complete network $\bm{G} = \left[
	\begin{array}{cc}
		0 & 1 \\
		1 & 0
	\end{array} \right]$
and empty network $\bm{G} = \left[
	\begin{array}{cc}
		0 & 0 \\
		0 & 0
	\end{array} \right]$
are both equilibrium networks.
\end{example}

%% The picture of equilibrium
\begin{figure}[h]
\centering
\tikzset{every picture/.style={line width=0.75pt}}       
\begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
\draw  (115.49,390.74) -- (519.5,390.74)(149.83,55) -- (149.83,423.95) (512.5,385.74) -- (519.5,390.74) -- (512.5,395.74) (144.83,62) -- (149.83,55) -- (154.83,62)  ;
\draw [line width=0.75]  [dash pattern={on 0.84pt off 2.51pt}]  (148,172) -- (367.5,172) ;
\draw  [dash pattern={on 0.84pt off 2.51pt}]  (367.5,171) -- (367.5,392) ;
\draw  [draw opacity=0][fill={rgb, 255:red, 103; green, 174; blue, 255 }  ,fill opacity=0.52 ] (149.83,172) -- (367.5,172) -- (367.5,392) -- (149.83,392) -- cycle ;
\draw  [dash pattern={on 0.84pt off 2.51pt}]  (266.5,72) -- (268.5,392) ;
\draw  [dash pattern={on 0.84pt off 2.51pt}]  (498.5,272) -- (383.5,272.25) -- (149.5,271.75) ;
\draw  [draw opacity=0][fill={rgb, 255:red, 103; green, 174; blue, 255 }  ,fill opacity=0.52 ] (266.5,72) -- (498.5,72) -- (498.5,272) -- (266.5,272) -- cycle ;
\draw    (548,306) -- (320.89,225.67) ;
\draw [shift={(319,225)}, rotate = 379.48] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
\draw (540,391) node   {$c_{12}$};
\draw (151,40) node   {$c_{21}$};
\draw (138,403) node   {$O$};
\draw (96,173) node   {$\frac{1}{2}\left(\frac{1}{1\ -\ \phi }\right)^{2} -\frac{1}{2}$};
\draw (390,414) node   {$\frac{1}{2}\left(\frac{1}{1\ -\ \phi }\right)^{2} -\frac{1}{2}$};
\draw (95,273) node   {$\frac{1}{2}( 1+\phi )^{2} -\frac{1}{2}$};
\draw (265,414) node   {$\frac{1}{2}( 1+\phi )^{2} -\frac{1}{2}$};
\draw (438,117) node   {$G^{*} \ =\ \begin{bmatrix}
0 & 1\\
1 & 0
\end{bmatrix}$};
\draw (206,352) node   {$G^{*} \ =\ \begin{bmatrix}
0 & 0\\
0 & 0
\end{bmatrix}$};
\draw (207,125) node   {$G^{*} \ =\ \begin{bmatrix}
0 & 1\\
0 & 0
\end{bmatrix}$};
\draw (442,336) node   {$G^{*} \ =\ \begin{bmatrix}
0 & 0\\
1 & 0
\end{bmatrix}$};
\draw (627,325) node   {$G^{*} \ =\begin{bmatrix}
0 & 1\\
1 & 0
\end{bmatrix} ,\begin{bmatrix}
0 & 0\\
0 & 0
\end{bmatrix}$};
\end{tikzpicture}
\caption{Equilibrium network region} \label{fig:eq}
\end{figure}

Example 1 shows the equilibrium network may not be unique and Figure \ref{fig:eq} shows that the region of costs which brings the respective equilibrium network.
We can see the region which returns complete equilibrium network and empty equilibrium network overlap.
From this perspective, the algorithm can potentially converge multiple equilibria.
In each step, the number of the agents who do not take best responses is generally greater than one.
Therefore, the order of the agents who delete the links is changed, and the network in each steps is also changed.
This may lead to the different networks.
However, we can show that the equilibrium which is derived by the algorithm is unique.

To show the uniquness, we need an additional result.
Let $BR_i(\bm{\psi}_{-i})$ be the set of $i$'s best responses for $\bm{\psi}_{-i}$, that is
\[ BR_i(\bm{\psi}_{-i}) = \{ \psi_i \subset N_i(g^p) | u_i(\bm{x}^*(g(\psi_i, \bm{\psi}_{-i})), \psi_i, \bm{\psi}_{-i}, \bm{C}, \phi) \ge u_i(\bm{x}^*(g(\tilde{\psi}_i, \bm{\psi}_{-i})), \tilde{\psi}_i, \bm{\psi}_{-i}, \bm{C}, \phi) \ \forall \tilde{\psi}_i \subset N_i(g^p) \} \]
We can show that the number of best responses for other playe{}rs' strategies is one.

\begin{lemma}
In the Algorithm 1, for any step $k$, $|BR_i(\bm{\psi}_{-i}^{(k-1)})| = 1$ for any $i \in NB^{(k-1)}$
\end{lemma}

Lemma 3 states that when agent $i$ wants to change her neighbors, the way to change them is uniquely determined.
But, in general, $|BR_i(\bm{\psi}_{-i})|$ may be greater than $1$.
For example, not changing neighbors and changing them can be both best responses at the same time.
From this lemma, we can show the uniqueness of the equilibrium network from the algorithm.

\begin{theorem}
Given $\bm{C}, g^p, \bm{\alpha}, and \phi$, the equilibrium network derived by Algorithm 1 is unique.
\end{theorem}

From this theorem, we can say the order of the agents who take best responses does not matter.
The set of deleted links is determined only by costs, but not by the other players' links.
From now on, we only consider the network derived by the algorithm.


\subsection{Comparative Statics}

In this section, we argue the comparative statics by changing the parameter $\bm{C}$.
When the cost of forming links decrease, we conjecture that the network becomes denser because agents are more likely to form the links.

We denote that, for network $g$ and $h$, $g \supseteq h$ if all links in the network $h$ are existed in the network $g$, that is $\bm{G} \ge \bm{H}$.
Next proposition shows that our conjection is verified.

\begin{proposition}
Given the potential network $g^p$.
Consider the cost $\bm{\hat{C}}$ and $\bm{C}$ with $\bm{\hat{C}} \le \bm{C}$.
Then,
\[ g(\bm{\psi}^*(g^p, \bm{\hat{C}})) \supseteq g(\bm{\psi}^*(g^p, \bm{C})) \]
\end{proposition}

The network is a increasing function in the costs of forming links.
However, it is obvious that this function is discontiunous.
The next example shows that small changes in the costs makes the network entirely changed.

\begin{example}
Consider the network with $n = 5$, and the potential network so that $g_{ij}^p = 1$ for any pair $ij(i \neq j)$.
Assume $\bm{\alpha} = (1, 1, 1, 1, 1)$ and $\phi = \frac{1}{5}$, which satisfies the Assumption 1.
Consider the costs $\bm{C}$ such that
\[ \bm{C} = \left[
			\begin{array}{ccccc}
				0 & 3 & 3 & 3 & 3 \\
				3 & 0 & 3 & 3 & 3 \\
				3 & 3 & 0 & 3 & 3 \\
				3 & 3 & 3 & 0 & 3  \\
				3 & 3 & 3 & 3 & 0
			\end{array} \right] \]
Then, the equilibrium network $g^*$ becomes
\[\bm{G}^* = \left[
			\begin{array}{ccccc}
				0 & 1 & 1 & 1 & 1 \\
				1 & 0 & 1 & 1 & 1 \\
				1 & 1 & 0 & 1 & 1 \\
				1 & 1 & 1 & 0 & 1 \\
				1 & 1 & 1 & 1 & 0
			\end{array} \right] \]
The equilibrium network becomes complete network.
On the other hand, when the cost of forming a link from agent $1$ to agent $2$ slightly increases, for small enough $\epsilon > 0$,
\[ \bm{C} = \left[
			\begin{array}{ccccc}
				0 & 3 + \epsilon & 3 & 3 & 3 \\
				3 & 0 & 3 & 3 & 3 \\
				3 & 3 & 0 & 3 & 3 \\
				3 & 3 & 3 & 0 & 3  \\
				3 & 3 & 3 & 3 & 0
			\end{array} \right] \]
then, the equilibrium network $\hat{g}^*$ becomes
\[ \bm{\hat{G}}^* = \left[
			\begin{array}{ccccc}
				0 & 0 & 0 & 0 & 0 \\
				0 & 0 & 0 & 0 & 0 \\
				0 & 0 & 0 & 0 & 0 \\
				0 & 0 & 0 & 0 & 0 \\
				0 & 0 & 0 & 0 & 0
			\end{array} \right] \]
The equilibrium network is empty network.
\end{example}

With the cost structure $\bm{C}$, all agents keep connected to all other agents, but all agents are on the threshhold from keeping all links to removing them.
In fact, all agents are indifference between them, keeping all links and removing all links give the exactly same payoff.
Algorithm 1 returns the complete networks by its construction.
When the cost of forming link from agent 1 to agent 2 slightly increases, agent 1 does not keep links to the others because agent 1's gain from agent 2 cannot compensate its cost.
Since agent 1 removes all links, agent 1's level of effort drastically diclines.
The gain from agent 1 also declines, and the levels of effort of agents declines.
Therefore, the benefit of forming links cannot compensate the cost of keeping links, and all agents remove all links.

We can see tiny changes in the costs generates large discontinuity in the structure of the network.
Example 2 shows that our model incorporates the {\it{phase transition}}, the phenomenon that the feature of the network is totally changed.
But as discussed above, it is difficult to identify the threshold of the transition by the discontinuity of the realized network.


\section{Finding the Key Player}

In this section, we argue the {\it{key player}} in the network.
In the previous literatures, for example Ballester, Calvo-Armengol, and Zenou(2006, 2010)~\cite{whowho, delinquent} and Liu et.al.(2012)~\cite{criminal}, argue the key player and give necessary and sufficient condition of who becomes it in the context of similar model.
In these papers, key player is defined as the agent who, once removed from the network, generates the highest possible reduction in aggreate effort level.
Key player is thought of, for example, the player who supports the criminal activity of his friends in the context of criminal network.
The formal definition of key player is given as follows:

\begin{definition}
Agent $i$ is the key player in the exogenous network $g$ if, given network $g$,
\[ i \in \arg \max_{i \in N} \{ x^*(g) - x^*(g^{-i}) \} \]
\end{definition}

Here we denote $x^*(g) = \sum_{i=1}^n x_i^*(g)$ and $g^{-i}$ is the network where agent $i$ is removed from the network $g$.
The adjecency matrix of $g^{-i}$, $\bm{G}^{-i}$, is obtained from $\bm{G}$ by setting to zero all of its $i$th row and column entries.
Previous literatures show the key player in the exogenous network does not always coincide with the most active player who excerts highest effort.

In this paper, the definition of key player might be different from the previous ones.
Since the network is endogenous in our model, the key player is the agent who generates the largest reduction in the total effort level once she is removed from the potential network.

\begin{definition}
Agent $i$ is the key player in the endogenous network if, given potential network $g^p$,
\[ i \in \arg \max_{i \in N} \{ x^*(g(\bm{\psi}({g^p}^{-i}, \bm{C}))) - x^*(g(\bm{\psi}({g^p}^{-i}, \bm{C}^{-i}))) \} \]
\end{definition}
Here we denote ${g^p}^{-i}$ is the network where agent $i$ is removed from the network $g^p$ as before.
$\bm{C}^{-i}$ is obtained from $\bm{C}$ by setting to zero all of its $i$th row and column entries.

As discussed in the previous section, there exists a discontinuity of the network realization in the link formation costs, so it is very difficult to identify the condition to be a key player.
The realization of the network is a key factor to be a key player in the endogenous network.
We know that denser network leads higher effort level by the network externality, so, in order to become a key player in the endogenous network, the realized network after removing should be sparse.

Although it is difficult to identify who becomes key player, we can find that the most active player, key player in the endogenous network, and key player in the exogenous network can be different each other.
To compare the kay player in the endogenous network and exogenous network, we treat realized network from the potential network and costs as given, then compute the key player in the exogenous network.
Endogenous one is computed by the definition.

\begin{example}
Consider the network with $n=5$, and the potential network so that $g_{ij}^p = 1$ for any pair $ij(i \neq j)$.
Assume $\bm{\alpha} = (1, 1, 1, 1, 1)$ and $\phi = \frac{1}{5}$, which satisfies the Assumption 1.

Consider the link formation costs as follows:
\[\bm{C} = \left[
			\begin{array}{ccccc}
				0 & 3.6 & 0.2 & 0.2 & 0.2 \\
				0.3 & 0 & 0.2 & 0.5 & 5.5 \\
				0.2 & 0.2 & 0 & 4.5 & 4.3 \\
				4.1 & 0.2 & 0.4 & 0 & 6.5 \\
				3.2 & 4.1 & 0.3 & 1.0 & 0
			\end{array} \right] \]
Then, the realized equilibrium network $g^*$ is:
\[\bm{G}^* = \left[
			\begin{array}{ccccc}
				0 & 0 & 1 & 1 & 1 \\
				1 & 0 & 1 & 1 & 0 \\
				1 & 1 & 0 & 0 & 0 \\
				0 & 1 & 1 & 0 & 0 \\
				0 & 0 & 1 & 0 & 0
			\end{array} \right] \]
In this network, we can compute the equilibrium effort levels by computer.
\[ (x_1^*, x_2^*, x_3^*, x_4^*, x_5^*) \approx (1.99541284, 2.12155963, 1.8233945, 1.78899083, 1.3646789) \]
As you see, the agent who excerts highest effort is agent $2$.
However, the key player in the endogenous network $g^*$ is agent $1$.
On the other hand, when we treat the network $g^*$ as given, the key player in the exogenous network is agent $3$.
See Table \ref{tab:key player}.

\begin{table}[htb]
  \begin{center}
    \begin{tabular}{|l|c|} \hline
      agent with highest effort & agent $2$ \\ \hline
      key player in the endogenous network & agent $1$ \\ \hline
      key player in the exogenous network & agent $3$ \\ \hline
    \end{tabular}
    \caption{Difference of key players}
    \label{tab:key player}
  \end{center}
\end{table}
\end{example}

Agent 2 is the most active player (with highest effort) in both endogenous and exogenous network because he connects to the agent 1 and 3 who excert second and third highest effort and strategic complementarity let him excert high level effort.
Agent 3 is the key player in the exogenous network.
All other agents form link to her, so once she is removed from the network, the others cannot get benefit from her amd aggregate negative impact is large.
The key player in the endogenous network is agent 1.
Once he is removed from the potential network, agents 2 and 3, who have the highest and third highest effort levels, cannot get large benefit from him, so their effort levels decline.
In addition, in the potential network without agent1, agent 3, who has the most incoming links, has only one link, so the negative impact of small effort level of agent 3 becomes large.


\section{Conclusion}

This paper argues the game with externality in the endogenously formed network.
Contrary to the previous literatures, agents endogenously form the network.
In the model, agents choose their neighbors in the potential network at first, and then the network is realized.
When agents form links to neighbors, they incur the link-specific costs.
Next, agents decide their effort level in this formed network, and their decisions generates the externality, peer effect, through the network.
We focus on the subgame perfect equilibrium where agents take pure strategies in each stage.
We mainly make use of the best response algorithm.
By this algorithm, we show that there always exists the equilibrium for any potential network and link formation costs.
In addition, the equilibrium derived by the algorithm is always unique.
However, the realized network high dimensional discontiunous function in the costs, so it is difficult to identify the structure of the network from the link formation costs.
We can find the key player in the endogenous network is not necessarily same with the one in the exogenous network.

Some weaknesses in our model are remaining for the future work.
First, link formation is accomplished by the unilateral decisions.
This is mainly due to the simplification of the analysis.
In reality, the relationships are made by the bilateral agreement, such as friendship network and firm-to-firm relationship.
In such a model, the network is treated as undirected network.
To incorporate the bilateral decisions, in the model similar to ours, we have to consider the complex belief system: when I offer the relationship, will she accept my offer?
The beliefs depend on other agents' decisions and beliefs, so it is not easy to bilateral link formation.
Second, links don't have any weights, unweighted network.
In many situations, relationships have unequal importances, for example, the closeness of friends are not equal in the social network.
In order to make the links weighted, agents have to deecide the link weights when they form relationships.
Our model can be extened to the unweighted network when agents choose the intensity of each forming links like Kim, J., Patacchini, E., Picard, P.M. and Y. Zenou (2017)~\cite{Urban}.
However, in such a model, agents form links to all other agents (weights are unequal), that is, realized network becomes complete network.
This is not appropriate for representing the real environment.
Finally, our model should be extended to various kinds of utility forms.
Currently, we can only explore the model with positive peer effects in the network, but these are many networks such that the externalities does not exist or are not appropriate to apply.
For example, our model is not suitable for analyzing the production network because we cannot incorporate the price of goods or production functions and the peer effect is not significant.
The analizing mechanism of network formation is important for policy implication.
It enables us to analyze the effect of intervention to the network on the allocation of goods or the social welfare.
Analyzing various kinds of network formation opens the way to the "network design" field.


\section{Appendix}

\begin{proof}[Proof of Proposition 1.]
	For all pair $ij$, from the definition of $g$ and $g^p$, $g_{ij} \ge 0$, $g_{ij}^p \ge 0$, and $g_{ij}^p \ge g_{ij}$.
	By the theorem $\text{I}^*$ of Debreu and Herstein (1952)~\cite{debreu}, we can have
	\[ \rho(\bm{G}^p) \ge \rho(\bm{G})  \]
	Since $\phi > 0$, by Assumption 1, $\phi \rho(\bm{G}) < 1$.
	By Theorem 1 of Ballester, Calv\'{o}-Armengol and Zenou (2005)~\cite{whowho}, we can have a unique Nash equilibrium $\bm{x}^*$, which is interior and given by
	\[ \bm{x}^* = {(\bm{I} - \phi \bm{G})}^{-1} \bm{\alpha} \] 
\end{proof}

\begin{proof}[Proof of Lemma 1.]
	We can write
	\[ \bm{x}(g) = {(\bm{I} - \phi \bm{G})}^{-1} \bm{\alpha} = \sum_{p=0}^{\infty} \phi^p \bm{G}^p \bm{\alpha} \]
	\[ \bm{x}(\hat{g}) = {(\bm{I} - \phi \bm{\hat{G}})}^{-1} \bm{\alpha} = \sum_{p=0}^{\infty} \phi^p \bm{\hat{G}}^p \bm{\alpha} \]
	Therefore,
	\begin{eqnarray}
		\label{lemma1-1}
		\bm{x}^*(\hat{g}) - \bm{x}^*(g) &=& \sum_{p=0}^{\infty} \phi^p \bm{\hat{G}}^p \bm{\alpha} - \sum_{p=0}^{\infty} \phi^p \bm{G}^p \bm{\alpha} \notag \\
										&=& \sum_{p=0}^{\infty} \phi^p (\bm{\hat{G}}^p - \bm{G}^p) \bm{\alpha} \notag \\
										&=& \phi (\bm{\hat{G}} - \bm{G}) \bm{\alpha} + \phi^2 (\bm{\hat{G}}^2 - \bm{G}^2) \bm{\alpha} + \cdots
	\end{eqnarray}
	By construction, we can write $\bm{\hat{G}} = \bm{G} + \bm{D}$ where $d_{ij} = 1$ and $d_{lm} = 0$ for any $lm \neq ij$.
	Then, the right hand side of (\ref{lemma1-1}) can be written as
	\[ \phi \bm{D} \bm{\alpha} + \phi (\bm{G} \bm{D} + \bm{D} \bm{G} + \bm{D}^2) \bm{\alpha} + \cdots \]
	Since $\bm{G}$ and $\bm{D}$ are both nonnegative matrices, their combinations are also nonnegative.
	Therefore, we have
	\begin{eqnarray*}
		\phi \bm{D} \bm{\alpha} + \phi (\bm{G} \bm{D} + \bm{D} \bm{G} + \bm{D}^2) \bm{\alpha} + \cdots &\ge& \bm{0} \\
		\Leftrightarrow \bm{x}^*(\hat{g}) - \bm{x}^*(g) &\ge& \bm{0}
	\end{eqnarray*}
	In addition, since $\hat{g}_{ij} - g_{ij} = 1$, $\alpha_j > 0$, and $\phi > 0$, $i$-th element of $\phi \bm{D} \bm{\alpha}$ is strictly greater than $0$.
	That is, $i$-th element of $\bm{x}^*(\hat{g}) - \bm{x}^*(g)$ is strictly greater than $0$.
	Thus, we have
	\[ x_i^*(\hat{g}) > x_i^*(g) \]
\end{proof}

\begin{proof}[Proof of Lemma 2.]
	Here, we abbreviate the strategies $\bm{\psi}$.
	Let $\bm{D}$ be the matrix such that $d_{ij} = 1$ and $d_{lm} = 0$ for any $lm \neq ij$.
	Then, we can write $\bm{\hat{G}} = \bm{G} + \bm{D}$ and $\bm{\hat{H}} = \bm{H} + \bm{D}$.
	We can have
	\begin{eqnarray*}
		\bm{x}^*(\hat{g}) - \bm{x}^*(g)
			&=& \sum_{p=0}^{\infty} \phi^p \bm{\hat{G}}^p \bm{\alpha} - \sum_{p=0}^{\infty} \phi^p \bm{G}^p \bm{\alpha} \\
			&=& \sum_{p=0}^{\infty} \phi^p (\bm{\hat{G}}^p - \bm{G}^p) \bm{\alpha} \\
			&=& \sum_{p=0}^{\infty} \phi^p ({(\bm{G} + \bm{D})}^p - \bm{G}^p) \\
			&=& \phi \bm{D} \bm{\alpha} + \phi^2 \{ \bm{G} \bm{D} + \bm{D} \bm{G} + \bm{D}^2 \} \bm{\alpha} + \cdots \\
		\bm{x}^*(\hat{h}) - \bm{x}^*(h)
			&=& \sum_{p=0}^{\infty} \phi^p \bm{\hat{H}}^p \bm{\alpha} - \sum_{p=0}^{\infty} \phi^p \bm{H}^p \bm{\alpha} \\
			&=& \sum_{p=0}^{\infty} \phi^p (\bm{\hat{H}}^p - \bm{H}^p) \bm{\alpha} \\
			&=& \sum_{p=0}^{\infty} \phi^p ({(\bm{H} + \bm{D})}^p - \bm{H}^p) \\
			&=& \phi \bm{D} \bm{\alpha} + \phi^2 \{ \bm{H} \bm{D} + \bm{D} \bm{H} + \bm{D}^2 \} \bm{\alpha} + \cdots
	\end{eqnarray*}
	Therefore,
	\begin{equation}
		\label{lemma2}
		\{ \bm{x}^*(\hat{g}) - \bm{x}^*(g) \} - \{ \bm{x}^*(\hat{h}) - \bm{x}^*(h) \} = \phi^2 ((\bm{G} - \bm{H}) \bm{D} + \bm{D} (\bm{G} - \bm{H})) \bm{\alpha} + \cdots
	\end{equation}
	By construction, $\bm{G} - \bm{H}$ is nonnegative matrix.
	Since $\bm{D}$ is nonnegative, the combination of $\bm{G} - \bm{H}$ and $\bm{D}$ is also nonnegative.
	The right hand side of (\ref{lemma2}) is greater than or equal to zero.
	Thus,
	\[ \bm{x}^*(\hat{g}) - \bm{x}^*(g) \ge \bm{x}^*(\hat{h}) - \bm{x}^*(h) \]
	Therefore, from (\ref{opteff}),
	\[ v_i^*(\bm{x}^*(\hat{g}), \hat{g}, \phi) - v_i^*(\bm{x}^*(g), g, \phi) \ge v_i^*(\bm{x}^*(\hat{h}), \hat{h}, \phi) - v_i^*(\bm{x}^*(h), h, \phi)\]
\end{proof}

\begin{proof}[Proof of Theorem 1.]
	Here, we abbreviate the strategies $\bm{\psi}$.
	Suppose link $ij$ is removed at step $\tau(\ge0)$ in Algorithm 1.
	Assume link $ij$ is reformed at step $\tau + t (t \ge 1)$.
	Denote $g \setminus \{ ij \}$ as the network obtained by removing link $ij$ from network $g$.
	Denote $g \cup \{ ij \}$ as the network obtained by adding link $ij$ to netwotk $g$.
	At step $\tau$,
	\begin{align}
		\label{thm1-1}
		& v_i(\bm{x}^*(g^{(\tau - 1)}), g^{(\tau - 1)}, \phi) - c_{ij} - \sum_{k \neq j} g_{ik}^{(\tau - 1)} c_{ik} \notag \\
			& < v_i(\bm{x}^*(g^{(\tau - 1)} \setminus \{ ij \}), g^{(\tau - 1)} \setminus \{ ij \}, \phi) - \sum_{k \neq j} {g_{ik} \setminus \{ ij \}}^{(\tau - 1)} c_{ik}
	\end{align}
	At step $\tau + t$,
	\begin{align}
		\label{thm1-2}
		& v_i(\bm{x}^*(g^{(\tau + t-1)}), g^{(\tau + t-1)}, \phi) - \sum_{k \neq j} g_{ik}^{(\tau + t-1)} c_{ik} \notag \\
			& < v_i(\bm{x}^*(g^{(\tau + t-1)} \cup \{ ij \}), g^{(\tau + t-1)} \cup \{ ij \}, \phi) - c_{ij} - \sum_{k \neq j} {g_{ik} \cup \{ ij \}}^{(\tau + t-1)} c_{ik}
	\end{align}
	From (\ref{thm1-1}),
	\[ c_{ij} > v_i(\bm{x}^*(g^{(\tau - 1)}), g^{(\tau - 1)}, \phi) - v_i(\bm{x}^*(g^{(\tau - 1)} \setminus \{ ij \}), g^{(\tau - 1)} \setminus \{ ij \}, \phi) \]
	From (\ref{thm1-2}),
	\[ c_{ij} < v_i(\bm{x}^*(g^{(\tau + t-1)} \cup \{ ij \}), g^{(\tau + t-1)} \cup \{ ij \}, \phi) - v_i(\bm{x}^*(g^{(\tau + t-1)}), g^{(\tau + t-1)}, \phi) \]
	Therefore,
	\begin{align}
		\label{thm1-3}
		& v_i(\bm{x}^*(g^{(\tau - 1)}), g^{(\tau - 1)}, \phi) - v_i(\bm{x}^*(g^{(\tau - 1)} \setminus \{ ij \}), g^{(\tau - 1)} \setminus \{ ij \}, \phi) \notag \\
			& < v_i(\bm{x}^*(g^{(\tau + t-1)} \cup \{ ij \}), g^{(\tau + t-1)} \cup \{ ij \}, \phi) - v_i(\bm{x}^*(g^{(\tau + t-1)}), g^{(\tau + t-1)}, \phi)
	\end{align}
	Note that, from Lemma 2,
	\begin{align*}
		& v_i(\bm{x}^*(g^{(\tau - 1)}), g^{(\tau - 1)}, \phi) - v_i(\bm{x}^*(g^{(\tau - 1)} \setminus \{ ij \}), g^{(\tau - 1)} \setminus \{ ij \}, \phi) \\
			& < v_i(\bm{x}^*(g^{(\tau + t-1)} \cup \{ ij \}), g^{(\tau + t-1)} \cup \{ ij \}, \phi) - v_i(\bm{x}^*(g^{(\tau + t-1)}), g^{(\tau + t-1)}, \phi)
	\end{align*}
	This contradicts to (\ref{thm1-3}), and link $ij$ will never be reformed once it is removed.

	Since the number of links is finite, the algorithm terminates in finite steps.
	By the construction of the algorithm, the converged network represents Nash equilibrium.
\end{proof}

\begin{proof}[Proof of Lemma 3.]
	Take any $i \in N$.
	Consider the network $g$ with $g_{ij} = g_{ik} = 1$.
	Suppose $i$ has multiple strategies which are best responses and bring strictly higher payoffs given other agents' strategies fixed.
	Without loss of generarity, we can assume such strategies are removing link $ij$ and removing link $ik$.
	Therefore,
	\begin{align}
		\label{lemma3-1}
		& u_i^*(\bm{x}^*(g \setminus \{ij\}), g \setminus \{ij\}, \phi) = u_i^*(\bm{x}^*(g \setminus \{ik\}), g \setminus \{ik\}, \phi) \notag \\
			& \Leftrightarrow v_i^*(\bm{x}^*(g \setminus \{ij\}), g \setminus \{ij\}, \phi) - (\sum_{l=1}^n g_{il} c_{il} - c_{ij}) = v_i^*(\bm{x}^*(g \setminus \{ik\}), g \setminus \{ik\}, \phi) - (\sum_{l=1}^n g_{il} c_{il} - c_{ik}) \notag \\
			& \Leftrightarrow v_i^*(\bm{x}^*(g \setminus \{ij\}), g \setminus \{ij\}, \phi) + c_{ij} = v_i^*(\bm{x}^*(g \setminus \{ik\}), g \setminus \{ik\}, \phi) + c_{ik} \notag \\
			& \Leftrightarrow c_{ij} = v_i^*(\bm{x}^*(g \setminus \{ik\}), g \setminus \{ik\}, \phi) - v_i^*(\bm{x}^*(g \setminus \{ij\}), g \setminus \{ij\}, \phi) + c_{ik}
	\end{align}
	Also, we have
	\begin{align}
		\label{lemma3-2}
		& u_i^*(\bm{x}^*(g \setminus \{ij\}), g \setminus \{ij\}, \phi) > u_i^*(\bm{x}^*(g), g, \phi) \notag \\
			& \Leftrightarrow v_i^*(\bm{x}^*(g \setminus \{ij\}), g \setminus \{ij\}, \phi) - (\sum_{l=1}^n g_{il} c_{il} - c_{ij}) > v_i^*(\bm{x}^*(g), g, \phi) - \sum_{l=1}^n g_{il} c_{il} \notag \\
			& \Leftrightarrow v_i^*(\bm{x}^*(g \setminus \{ij\}), g \setminus \{ij\}, \phi) + c_{ij} > v_i^*(\bm{x}^*(g), g, \phi) \notag \\
			& \Leftrightarrow c_{ik} > v_i^*(\bm{x}^*(g), g, \phi) - v_i^*(\bm{x}^*(g \setminus \{ik\}), g \setminus \{ik\}, \phi)
	\end{align}
	Inequality (\ref{lemma3-2}) is obtained from equation (\ref{lemma3-1}).
	Consider the strategy removing $ij$ and $ik$, which is not best reponse.
	Hence, we can have
	\begin{align}
		\label{lemma3-3}
		& u_i^*(\bm{x}^*(g \setminus \{ij\}), g \setminus \{ij\}, \phi) > u_i^*(\bm{x}^*(g \setminus \{ij,ik\}), g \setminus \{ij,ik\}, \phi) \notag \\
			& \Leftrightarrow v_i^*(\bm{x}^*(g \setminus \{ij\}), g \setminus \{ij\}, \phi) - (\sum_{l=1}^n g_{il} c_{il} - c_{ij}) > v_i^*(\bm{x}^*(g \setminus \{ij,ik\}), g \setminus \{ij,ik\}, \phi) - (\sum_{l=1}^n g_{il} c_{il} - c_{ij} - c_{ik}) \notag \\
			& \Leftrightarrow v_i^*(\bm{x}^*(g \setminus \{ij\}), g \setminus \{ij\}, \phi) - v_i^*(\bm{x}^*(g \setminus \{ij,ik\}), g \setminus \{ij,ik\}, \phi) > c_{ik}
	\end{align}
	By (\ref{lemma3-2}) and (\ref{lemma3-3}),
	\[ v_i^*(\bm{x}^*(g), g, \phi) - v_i^*(\bm{x}^*(g \setminus \{ik\}), g \setminus \{ik\}, \phi) < v_i^*(\bm{x}^*(g \setminus \{ij\}), g \setminus \{ij\}, \phi) - v_i^*(\bm{x}^*(g \setminus \{ij,ik\}), g \setminus \{ij,ik\}, \phi) \]
	However, by Lemma 2,
	\[ v_i^*(\bm{x}^*(g), g, \phi) - v_i^*(\bm{x}^*(g \setminus \{ik\}), g \setminus \{ik\}, \phi) \ge v_i^*(\bm{x}^*(g \setminus \{ij\}), g \setminus \{ij\}, \phi) - v_i^*(\bm{x}^*(g \setminus \{ij,ik\}), g \setminus \{ij,ik\}, \phi) \]
	This is contradiction, and deleting $ij$ and deleting $ik$ cannot be best responses at the same time.
\end{proof}

\begin{proof}[Proof of Theorem 2.]
	Fix $\bm{C}$, $g^p$, $\bm{\alpha}$, and $\phi$.
	Assume Algorithm 1 can return multiple equilibrium networks.
	In light of Lemma 3, there have to be some agents who have strategy which brings strictly higher payoffs at some step in the algorithm.
	Without loss of generality, we can assume player $i$ and $j$ ($i \neq j$ have strategies which give strictly higher payoffs at step $\tau$.
	Let $g^{* [i]}$ ($g^{* [j]}$) be the converged network where player $i$ ($j$) take the best response at step $\tau$.
	Also, let $D^{[i]}$ ($D^{[j]}$) be the set of deleted links in the steps from $g^{(\tau-1)}$ to $g^{* [i]}$ ($g^{* [j]}$).
	Suppose the number of steps from $g^{(\tau-1)}$ to $g^{* [i]}$ ($g^{* [j]}$) is $m \in \mathbb{N}$ ($n \in \mathbb{N}$).
	Consider the function $\iota^{[i]} : \{1, \cdots, m\} \rightarrow D^{[i]}$ and $\iota^{[j]} : \{1, \cdots, n\} \rightarrow D^{[j]}$, which indicate the deleted links in step $\tau - 1 + \iota^{[i]}(k)$ (, respectively step $\tau - 1 + \iota^{[j]}(k)$).

	We will show $\iota^{[i]}(1) \subset D^{[j]}$ and $\iota^{[j]}(1) \subset D^{[i]}$.
	By construction, $u_j(g^{(\tau-1)} \setminus \{ \iota^{[j]}(1) \}) > u_j(g^{(\tau-1)})$.
	That is, we have
	\[ v_j^*(g^{(\tau-1)} \setminus \{ \iota^{[j]}(1) \}) - (C - c_{\iota^{[j]}(1)}) > v_j^*(g^{(\tau-1)}) - C \]
	where $C = \sum_{k=1}^n g^{(\tau-1)}_{jk} c_{jk}$.
	In the steps after removing link $\iota^{[i]}(1)$, the network is now proper subset of $g^{(\tau-1)} \setminus \{\iota^{[i]}(1)\}$ and let $\tilde{g}$ be such a network.
	By Lemma 1, we have
	\[ v_j^*(g^{(\tau-1)} \setminus \{ \iota^{[j]}(1) \}) > v_j^*(\tilde{g} \setminus \{ \iota^{[j]}(1) \}) \]
	and
	\[ v_j^*(g^{(\tau-1)}) > v_j(\tilde{g})\]
\end{proof}

\begin{proof}[Proof of Proposition 2.]
	Consider the sequence of deleted links to converge to $g(\bm{\psi}^*(g^p, \bm{C})$.
	Suppose this sequence is unique.
\end{proof}


\begin{thebibliography}{99}
\bibitem{endo_net}
	Acemoglu, D. and Azar, P. (2019),
	"Endogenous Production Networks",
	Econometrica, \textit{forthcoming}.
\bibitem{}
	Acemoglu, D., Ozdaglar, A. E., and Tahbaz-Salehi, A. (2015),
	"Systemic Risk in Endogenous Financial Networks",
	Columbia Business School Research Paper No. 15-17.
\bibitem{babus}
	Babus, A. (2016),
	"The formation of financial networks",
	The RAND Journal of Economics, 47: 239-272.
\bibitem{whowho}
	Ballester, C., Calv\'{o}‐Armengol, A., and Zenou, Y. (2006),
	"Who's who in networks. Wanted: The key player,"
	Econometrica, 74(5), 1403-1417.
\bibitem{delinquent}
	Ballester, C., Zenou, Y., and Calv\'{o}-Armengol, A. (2010),
	"Delinquent networks",
	Journal of the European Economic Association, 8(1), 34-61.
\bibitem{context}
	Ballester, C., and Zenou, Y. (2014),
	"Key player policies when contextual effects matter",
	Journal of Mathematical Sociology, 38.4, 233–248.
\bibitem{}
	Banerjee, A., Chandrasekhar, A. G., Duflo, E., and Jackson, M. O. (2013),
	"The diffusion of microfinance",
	Science, 341(6144), 1236498.
\bibitem{bonacich}
	Bonacich, P. (1987),
	"Power and centrality: A family of measures",
	American journal of sociology, 92(5), 1170-1182.
\bibitem{}
	Bramoull\'{e}, Y., Djebbari, H., and Fortin, B. (2009),
	"Identification of peer effects through social networks",
	Journal of econometrics, 150(1), 41-55.
\bibitem{}
	Bramoull\'{e}, Y., Kranton, R., and D'Amours, M. (2014),
	"Strategic interaction and networks",
	American Economic Review, 104(3), 898-930.
\bibitem{}
	Calv\'{o}-Armengol, A., Patacchini, E., and Zenou, Y. (2009),
	"Peer effects and social networks in education",
	The Review of Economic Studies, 76(4), 1239-1267.
\bibitem{canen}
	Canen, N., Jackson, M. O. and Trebbi, F. (2019),
	"Endogenous Networks and Legislative Activity",
	\textit{Working Paper}.
\bibitem{}
	Cohen-Cole, E., Patacchini, E., and Zenou, Y. (2010),
	"Systemic risk and network formation in the interbank market",
	CAREFIN Research Paper, (25).
\bibitem{debreu}
	Debreu, G., and Herstein, I. N. (1953),
	"Nonnegative square matrices",
	Econometrica: Journal of the Econometric Society, 597-607.
\bibitem{}
	Dell, M. (2015),
	"Trafficking networks and the Mexican drug war",
	American Economic Review, 105(6), 1738-79.
\bibitem{}
	Denbee, E., Julliard, C., Li, Y., and Yuan, K. Z. (2018),
	"Network Risk and Key Players: A Structural Analysis of Interbank Liquidity",
	Fisher College of Business Working Paper No. 2018-03-011;
	Charles A. Dice Center Working Paper No. 2018-11;
	Columbia Business School Research Paper No. 17-6. 
\bibitem{contagion}
	Elliott, M., Golub, B., and Jackson, M. O. (2014),
	"Financial networks and contagion",
	American Economic Review, 104(10), 3115-53.
\bibitem{farboodi}
	Farboodi, M. (2014),
	"Intermediation and voluntary exposure to counterparty risk",
	\textit{Working Paper}.
\bibitem{}
	Galeotti, A., Goyal, S., Jackson, M. O., Vega-Redondo, F., and Yariv, L. (2010),
	"Network games",
	The review of economic studies, 77(1), 218-244.
\bibitem{hiller}
	Hiller, T. (2017),
	"Peer effects in endogenous networks",
	Games and Economic Behavior, 105, 349-367.
\bibitem{social}
	Jackson, M. O. (2010),
	"Social and economic networks",
	Princeton university press.
\bibitem{}
	Jackson, M. O., and Wolinsky, A. (1996),
	"A strategic model of social and economic networks",
	Journal of economic theory, 71(1), 44-74.
\bibitem{katz}
	Katz, L. (1953),
	"A new status index derived from sociometric analysis",
	Psychometrika, 18(1), 39-43.
\bibitem{Urban}
	Kim, J., Patacchini, E., Picard, P.M. and Y. Zenou (2017),
	"Urban interactions",
	\textit{Working Paper}.
\bibitem{}
	K\"{o}nig, M. D., Liu, X., and Zenou, Y. (2019),
	"R\&D Networks: Theory, Empirics, and Policy Implications",
	Review of Economics and Statistics, 101(3), 476-491.
\bibitem{}
	K\"{o}nig, M. D., Rohner, D., Thoenig, M., and Zilibotti, F. (2017),
	"Networks in conflict: Theory and evidence from the great war of africa",
	Econometrica, 85(4), 1093-1132.
\bibitem{criminal}
	Liu, X., Patacchini, E., Zenou, Y., and Lee, L. F. (2012),
	"Criminal networks: Who is the key player?",
	\textit{Working Paper}.
\bibitem{}
	Liu, X., Patacchini, E., and Zenou, Y. (2014),
	"Endogenous peer effects: local aggregate or local average?",
	Journal of Economic Behavior \& Organization, 103, 39-59.
\bibitem{}
	Marco, B., and Eleonora, P., (2018),
	"Influencing Connected Legislators",
	Journal of Political Economy, 126, no. 6, 2277-2322.
\bibitem{}
	Marco, B., Eleonora, P., and Edoardo, R. (2019),
	"Endogenous Social Connections in Legislatures",
	\textit{Working Paper}.
\bibitem{}
	Margherita, C., and Mariapia, M. (2015),
	"Formation of Migrant  Networks",
	Scandinavian Journal of Economics, 117(2), 592–618.
\bibitem{}
	Milgrom, P., and Roberts, J. (1990),
	"Rationalizability, learning, and equilibrium in games with strategic complementarities",
	Econometrica: Journal of the Econometric Society, 1255-1277.
\bibitem{AGT}
	Nisan, N., Roughgarden, T., Tardos, E., and Vazirani, V. V. (Eds.). (2007),
	"Algorithmic game theory",
	Cambridge university press.
\bibitem{ober}
	Oberfield, E. (2018),
	"A theory of input–output architecture",
	Econometrica, 86(2), 559-589.
\bibitem{}
	Rees, A. (1966),
	"Information Networks in Labor Markets",
	The American Economic Review, 56(1/2), 559-566.
\bibitem{}
	Vives, X. (1990),
	"Nash equilibrium with strategic complementarities",
	Journal of Mathematical Economics, 19(3), 305-321.
\end{thebibliography}


\end{document}
